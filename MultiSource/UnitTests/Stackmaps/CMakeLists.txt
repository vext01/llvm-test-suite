file(GLOB llsources ${CMAKE_CURRENT_SOURCE_DIR}/*.ll)
SET_SOURCE_FILES_PROPERTIES(${llsources} PROPERTIES LANGUAGE CXX)

set(STACKMAP_TEST_COMMON_FILES
    ${CMAKE_CURRENT_SOURCE_DIR}/Harness.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/StackMapParser.cpp)

if(CMAKE_SYSTEM_PROCESSOR STREQUAL "x86_64")
llvm_multisource(stackmaps
    ${STACKMAP_TEST_COMMON_FILES}
    ${CMAKE_CURRENT_SOURCE_DIR}/input_${CMAKE_SYSTEM_PROCESSOR}.ll
)
endif()
